# üîê –°–∏—Å—Ç–µ–º–∞ —Å –ø—Ä–æ—Å—Ç–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π (–±–µ–∑ JWT)

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

‚úÖ **–£–±—Ä–∞–Ω–æ:**
- JWT —Ç–æ–∫–µ–Ω—ã
- Bearer –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –°–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–æ–∫–µ–Ω–æ–≤

‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ü—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –§–ò–û –∏ –ø–∞—Ä–æ–ª—é
- Form-data –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
python init_chat_db.py
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
python add_users.py
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
python chat_api_server.py
```

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
python test.py
```

## üì° API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `POST /auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /auth/me` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

### –ß–∞—Ç—ã
- `POST /chats` - –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞
- `POST /chats/list` - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
- `POST /chats/{chat_id}/info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —á–∞—Ç–µ
- `POST /chats/{chat_id}/delete` - –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–∞
- `POST /chats/{chat_id}/messages` - –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞

### RAG —Å–∏—Å—Ç–µ–º–∞
- `POST /question` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

## üîß –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```json
POST /auth/login
{
  "fio": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
  "password": "mypassword123"
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞
```bash
curl -X POST "http://localhost:8000/chats" \
  -H "Content-Type: application/json" \
  -d '{"title": "–ú–æ–π —á–∞—Ç"}' \
  -F "fio=–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á" \
  -F "password=mypassword123"
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
```bash
curl -X POST "http://localhost:8000/question" \
  -H "Content-Type: application/json" \
  -d '{"chat_id": 1, "messages": [{"by": "user", "message": "–ü—Ä–∏–≤–µ—Ç!"}]}' \
  -F "fio=–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á" \
  -F "password=mypassword123"
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã
```bash
python test.py
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `fio` - –§–ò–û (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
- `password_hash` - –•–µ—à –ø–∞—Ä–æ–ª—è
- `work_group` - –†–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `last_login` - –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥
- `is_active` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

### –ß–∞—Ç
- `id` - ID —á–∞—Ç–∞
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `is_active` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ —á–∞—Ç

### –°–æ–æ–±—â–µ–Ω–∏–µ
- `id` - ID —Å–æ–æ–±—â–µ–Ω–∏—è
- `chat_id` - ID —á–∞—Ç–∞
- `by` - –û—Ç –∫–æ–≥–æ (user/agent)
- `message` - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `classification` - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞)
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é bcrypt
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –§–ò–û –∏ –ø–∞—Ä–æ–ª—é
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –ù–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –ú–µ–Ω—å—à–µ —Ç–æ—á–µ–∫ –æ—Ç–∫–∞–∑–∞
3. **–ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å** - –õ–µ–≥–∫–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
4. **–°–∫–æ—Ä–æ—Å—Ç—å** - –ë—ã—Å—Ç—Ä–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
5. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- –§–ò–û –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç –§–ò–û –∏ –ø–∞—Ä–æ–ª—å
- –ü–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
